package me.castle.stppatch;

import org.bukkit.Bukkit;
import org.bukkit.Material;
import org.bukkit.ChatColor;
import org.bukkit.entity.Player;
import org.bukkit.event.EventHandler;
import org.bukkit.event.Listener;
import org.bukkit.event.player.PlayerKickEvent;
import org.bukkit.inventory.ItemStack;
import org.bukkit.plugin.java.JavaPlugin;

public final class stppatch extends JavaPlugin implements Listener {
        public void onEnable() {
                getLogger().info("Enabling StpPatch.");
                getServer().getPluginManager().registerEvents(this, this);
                getConfig().options().copyDefaults();
                saveConfig();
        }
        
        public void onDisable() {
                getLogger().info("Disabling StpPatch");
        }
        
        @EventHandler
        public void onPlayerKick(PlayerKickEvent pke) {
                if (pke.getReason() == "Nope!") {
                        pke.setCancelled(true);
                        p.getInventory().clear();
                        p.getInventory().setHelmet(new ItemStack(Material.AIR));
                        p.getInventory().setChestplate(new ItemStack(Material.AIR));
                        p.getInventory().setLeggings(new ItemStack(Material.AIR));
                        p.getInventory().setBoots(new ItemStack(Material.AIR));
                        p.setHealth(0);
                        p.sendMessage(getConfig().getString(ChatColor.translateAlternateColorCodes('&',("WMessage"))));
                        for (Player online : Bukkit.getServer().getOnlinePlayers()) {
                            if (online.isOp()) {
                                String configstring = getConfig().getString("OMessage");
                                online.sendMessage(ChatColor.translateAlternateColorCodes('&', configstring.replace("%p", p.getName())));

                            }
                        } 
                        	 
                }
        }
}